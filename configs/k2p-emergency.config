# ==================== 目标配置 ====================
CONFIG_TARGET_ramips=y
CONFIG_TARGET_ramips_mt7621=y
CONFIG_TARGET_ramips_mt7621_DEVICE_phicomm_k2p=y

# ==================== 镜像格式 ====================
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_TARGET_KERNEL_PARTSIZE=16

# ==================== 基础系统 ====================
CONFIG_PACKAGE_base-files=y
CONFIG_PACKAGE_busybox=y
CONFIG_PACKAGE_dropbear=y
CONFIG_PACKAGE_firewall=y
CONFIG_PACKAGE_fstools=y
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y

# ==================== 网络 ====================
CONFIG_PACKAGE_dnsmasq=y
CONFIG_PACKAGE_odhcpd-ipv6only=y
CONFIG_PACKAGE_ip6tables=y
CONFIG_PACKAGE_iptables=y

# ==================== K2P驱动 ====================
CONFIG_PACKAGE_kmod-mt7621=y
CONFIG_PACKAGE_kmod-mt7603=y
CONFIG_PACKAGE_kmod-mt76x2=y
CONFIG_PACKAGE_kmod-cfg80211=y
CONFIG_PACKAGE_kmod-mac80211=y
CONFIG_PACKAGE_wpad-basic=y

# ==================== 优化 ====================
CONFIG_TARGET_OPTIMIZATION="-Os -pipe -mcpu=1004kc"
# ==================== K2P紧急精简配置 ====================
# 目标：确保固件 < 15MB

# 大幅减小分区
CONFIG_TARGET_ROOTFS_PARTSIZE=64

# ==================== 移除所有非核心功能 ====================
# 移除科学上网（占用最大）
# CONFIG_PACKAGE_luci-app-ssr-plus=y
# CONFIG_PACKAGE_shadowsocksr-libev-ssr-redir=y
# CONFIG_PACKAGE_shadowsocksr-libev-ssr-local=y

# 移除VPN
# CONFIG_PACKAGE_luci-app-wireguard=y
# CONFIG_PACKAGE_wireguard-tools=y

# 移除广告过滤
# CONFIG_PACKAGE_luci-app-adblock=y

# 移除部分工具
# CONFIG_PACKAGE_htop=y
# CONFIG_PACKAGE_iperf3=y
# CONFIG_PACKAGE_ethtool=y

# ==================== 保留绝对核心功能 ====================
# 系统工具（最小集）
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_openssh-server=y

# 网络加速（效果显著，保留）
CONFIG_PACKAGE_luci-app-turboacc=y

# 基础网络
CONFIG_PACKAGE_luci-app-upnp=y
CONFIG_PACKAGE_luci-app-ddns=y

# LuCI管理
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-app-opkg=y

# 多语言
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
CONFIG_PACKAGE_luci-i18n-firewall-zh-cn=y
CONFIG_PACKAGE_luci-i18n-turboacc-zh-cn=y

# ==================== 编译优化 ====================
CONFIG_DEBUG=n
CONFIG_STRIP=y
